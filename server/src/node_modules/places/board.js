"use strict"

const sendPlace = require("send-place")

module.exports = {
  handler: handler,
  columns: [
    {
      "description": ``
    },
    {
      "description": `Le colonne "Doing" contient un unique papier, sur lequel est écrit "Examiner ce tableau".`
    },
    {
      "description": `La colonne "Done" contient plusieurs papiers sur lesquels sont écrits de courts messages: "Se faire capturer par l'étoile noire", "Eteindre le rayon tracteur", "DELETE /vader", "Remonter dans le temps", "Noter le code sur la porte".`
    },
  ]
}

function handler(place, request, response) {
  const rangeHeader = request.get("Range") || `columns=1-1`
  console.log("range", rangeHeader)
  const pageNumber = Number(rangeHeader.match(/columns=(\d)\-\d/)[1])
  if (!place.columns[pageNumber]) return response.sendStatus(416)
  response.set("Content-Range", `columns ${pageNumber}-${pageNumber}/${place.columns.length}`).status(206)
  sendPlace(response, place.columns[pageNumber])
}
