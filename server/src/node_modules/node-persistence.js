"use strict"

const render = require("render")
const routes = require("places/routes")

module.exports = {
  createGame: createGame,
  with: _with
}

function createGame(playerName) {
  // nothing
}

function get(placeId, callback) {
  console.log(placeId, routes[placeId])
  const placeFromFs = require(`places/${placeId}`)
  const placeToReturn = placeFromFs.rendered ? placeFromFs : render(placeId, placeFromFs, routes[placeId])
  callback(placeToReturn)
}

function set(placeId, place) {
  // nothing
}

function _with(placeId, transform) {
  get(placeId, function(place) {
    if (transform(place) !== false) set(placeId, place)
  })
}
